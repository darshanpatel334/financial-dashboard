<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Financial Analytics Dashboard - Nivezo</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="container">
            <a href="index.html" class="nav-brand" style="text-decoration: none;">Nivezo</a>
            <div class="user-info">
                <span class="user-email" id="userEmail"></span>
                <button class="btn btn-secondary" onclick="handleLogout()">Logout</button>
            </div>
        </div>
    </nav>

    <div class="container">
        <!-- SEBI Compliance Disclaimer (Top Alert) -->
        <div style="background: #fef3c7; border: 2px solid #f59e0b; border-radius: 0.5rem; padding: 1rem; margin-bottom: 2rem;">
            <div style="display: flex; align-items: center; color: #92400e;">
                <i class="fas fa-exclamation-triangle" style="margin-right: 0.5rem; font-size: 1.2rem;"></i>
                <strong>SEBI Compliance Notice:</strong> Nivezo is not a SEBI-registered investment advisor. This dashboard provides analytical tools for educational use only. No investment advice is provided.
            </div>
        </div>

        <!-- Page Header -->
        <div class="page-header">
            <h1><i class="fas fa-chart-pie"></i> Financial Analytics Dashboard</h1>
            <p>Educational insights and analytical tools to understand your financial position</p>
        </div>

        <!-- 1. Net Worth Summary -->
        <div class="section-card">
            <div class="section-header">
                <h2 class="section-title">
                    <i class="fas fa-chart-pie"></i> Net Worth Summary
                </h2>
                <small class="text-secondary">Overview of your assets, liabilities, and net worth distribution</small>
            </div>
            
            <div class="grid-2">
                <div class="card">
                    <div class="card-body">
                        <div class="summary-grid" style="grid-template-columns: 1fr 1fr 1fr; gap: 1rem; margin-bottom: 1rem;">
                            <div style="text-align: center;">
                                <h4 style="margin-bottom: 0.5rem;">Total Assets</h4>
                                <div class="score-number" style="color: var(--success-color);" id="totalAssets">₹0</div>
                            </div>
                            <div style="text-align: center;">
                                <h4 style="margin-bottom: 0.5rem;">Total Liabilities</h4>
                                <div class="score-number" style="color: var(--danger-color);" id="totalLiabilities">₹0</div>
                            </div>
                            <div style="text-align: center;">
                                <h4 style="margin-bottom: 0.5rem;">Net Worth</h4>
                                <div class="score-number" style="color: var(--primary-color);" id="netWorthValue">₹0</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-body">
                        <h4 style="text-align: center; margin-bottom: 1rem;">Asset Distribution</h4>
                        <div class="chart-wrapper" style="height: 200px;">
                            <canvas id="assetDistributionChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 2. Expense vs Income Tracker -->
        <div class="section-card">
            <div class="section-header">
                <h2 class="section-title">
                    <i class="fas fa-balance-scale"></i> Income vs Expense Analysis
                </h2>
                <small class="text-secondary">Monthly cash flow and savings ratio analysis</small>
            </div>
            
            <div class="grid-2">
                <div class="card">
                    <div class="card-body">
                        <div class="summary-grid" style="grid-template-columns: 1fr 1fr 1fr; gap: 1rem; margin-bottom: 1rem;">
                            <div style="text-align: center;">
                                <h4 style="margin-bottom: 0.5rem;">Monthly Income</h4>
                                <div class="score-number" style="color: var(--success-color);" id="monthlyIncome">₹0</div>
                            </div>
                            <div style="text-align: center;">
                                <h4 style="margin-bottom: 0.5rem;">Monthly Expenses</h4>
                                <div class="score-number" style="color: var(--danger-color);" id="monthlyExpenses">₹0</div>
                            </div>
                            <div style="text-align: center;">
                                <h4 style="margin-bottom: 0.5rem;">Savings Ratio</h4>
                                <div class="score-number" style="color: var(--primary-color);" id="savingsRatio">0%</div>
                            </div>
                        </div>
                        <div style="text-align: center; padding: 1rem; background: #f8fafc; border-radius: 0.5rem; margin-top: 1rem;">
                            <small style="color: var(--text-secondary);">
                                <i class="fas fa-info-circle"></i> 
                                Average Indian household saves 22% of income (for reference)
                            </small>
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-body">
                        <h4 style="text-align: center; margin-bottom: 1rem;">Monthly Cash Flow</h4>
                        <div class="chart-wrapper" style="height: 200px;">
                            <canvas id="cashFlowChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 3. Emergency Fund Status -->
        <div class="section-card">
            <div class="section-header">
                <h2 class="section-title">
                    <i class="fas fa-umbrella"></i> Emergency Fund Status
                </h2>
                <small class="text-secondary">Liquid assets coverage for unexpected expenses</small>
            </div>
            
            <div class="grid-2">
                <div class="card">
                    <div class="card-body text-center">
                        <h4>Emergency Fund Coverage</h4>
                        <div class="score-number" id="emergencyFundMonths" style="font-size: 3rem; margin: 1rem 0;">0</div>
                        <p style="margin-bottom: 1rem;">Months of expenses covered</p>
                        <div class="progress-bar" style="height: 1rem; margin-bottom: 0.5rem;">
                            <div class="progress-fill" id="emergencyFundProgress" style="background: var(--warning-color);"></div>
                        </div>
                        <small style="color: var(--text-secondary);">
                            <i class="fas fa-lightbulb"></i> 
                            Many financial planners recommend 6 months as a buffer
                        </small>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-body">
                        <h4 style="margin-bottom: 1rem;">Liquid Assets Breakdown</h4>
                        <div id="liquidAssetsBreakdown">
                            <!-- Liquid assets breakdown will be populated here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 4. Financial Health Insights -->
        <div class="section-card">
            <div class="section-header">
                <h2 class="section-title">
                    <i class="fas fa-heartbeat"></i> Financial Health Insights
                </h2>
                <small class="text-secondary">Key financial ratios and peer comparisons</small>
            </div>
            
            <div class="grid-4">
                <div class="card">
                    <div class="card-body text-center">
                        <h4>Savings Ratio</h4>
                        <div class="score-number" id="savingsRatioMetric">0%</div>
                        <div class="progress-bar" style="margin: 1rem 0;">
                            <div class="progress-fill" id="savingsRatioBar"></div>
                        </div>
                        <small>Peer Avg: 22%</small>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-body text-center">
                        <h4>EMI-to-Income</h4>
                        <div class="score-number" id="emiToIncomeRatio">0%</div>
                        <div class="progress-bar" style="margin: 1rem 0;">
                            <div class="progress-fill" id="emiToIncomeBar"></div>
                        </div>
                        <small>Recommended: <30%</small>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-body text-center">
                        <h4>Asset-to-Liability</h4>
                        <div class="score-number" id="assetLiabilityRatio">0x</div>
                        <div class="progress-bar" style="margin: 1rem 0;">
                            <div class="progress-fill" id="assetLiabilityBar"></div>
                        </div>
                        <small>Higher is better</small>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-body text-center">
                        <h4>YoY Net Worth Growth</h4>
                        <div class="score-number" id="netWorthGrowth">0%</div>
                        <div class="progress-bar" style="margin: 1rem 0;">
                            <div class="progress-fill" id="netWorthGrowthBar"></div>
                        </div>
                        <small>Estimated growth</small>
                    </div>
                </div>
            </div>
        </div>

        <!-- 5. Simulation Tools -->
        <div class="section-card">
            <div class="section-header">
                <h2 class="section-title">
                    <i class="fas fa-calculator"></i> Financial Simulation Tools
                </h2>
                <small class="text-secondary">Educational calculators for financial planning (for simulation purposes only)</small>
            </div>
            
            <div class="grid-2">
                <div class="card">
                    <div class="card-body">
                        <h4><i class="fas fa-chart-line"></i> SIP Calculator</h4>
                        <p style="margin: 0.5rem 0; color: var(--text-secondary);">Calculate potential returns from systematic investments</p>
                        <button class="btn btn-primary" style="width: 100%;" onclick="openSimulationTool('sip')">
                            <i class="fas fa-external-link-alt"></i> Open SIP Calculator
                        </button>
                        <small style="color: var(--warning-color);">⚠️ For simulation purposes only</small>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-body">
                        <h4><i class="fas fa-bullseye"></i> Goal-Based Investment Simulator</h4>
                        <p style="margin: 0.5rem 0; color: var(--text-secondary);">Estimate corpus needed for financial goals</p>
                        <button class="btn btn-primary" style="width: 100%;" onclick="openSimulationTool('goal')">
                            <i class="fas fa-external-link-alt"></i> Open Goal Calculator
                        </button>
                        <small style="color: var(--warning-color);">⚠️ For simulation purposes only</small>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-body">
                        <h4><i class="fas fa-trophy"></i> Freedom Score Estimator</h4>
                        <p style="margin: 0.5rem 0; color: var(--text-secondary);">Analyze your path to financial independence</p>
                        <button class="btn btn-primary" style="width: 100%;" onclick="openSimulationTool('freedom')">
                            <i class="fas fa-external-link-alt"></i> Open FF Calculator
                        </button>
                        <small style="color: var(--warning-color);">⚠️ For simulation purposes only</small>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-body">
                        <h4><i class="fas fa-bed"></i> Retirement Corpus Estimator</h4>
                        <p style="margin: 0.5rem 0; color: var(--text-secondary);">Estimate retirement corpus requirements</p>
                        <button class="btn btn-primary" style="width: 100%;" onclick="openSimulationTool('retirement')">
                            <i class="fas fa-external-link-alt"></i> Open Retirement Calculator
                        </button>
                        <small style="color: var(--warning-color);">⚠️ For simulation purposes only</small>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Content and Educational Sidebar Layout -->
        <div class="grid-4" style="grid-template-columns: 3fr 1fr; gap: 2rem;">
            <!-- Main Content Area -->
            <div>
                <!-- Risk Profile Analysis -->
                <div class="section-card">
                    <div class="section-header">
                        <h2 class="section-title">
                            <i class="fas fa-balance-scale"></i> Risk Profile Analysis
                        </h2>
                    </div>
                    
                    <div class="card">
                        <div class="card-body">
                            <div id="riskProfileDisplay">
                                <!-- Risk profile display will be populated here -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 6. Educational Cards Sidebar -->
            <div>
                <div class="section-card">
                    <div class="section-header">
                        <h3 style="font-size: 1.2rem;">
                            <i class="fas fa-graduation-cap"></i> Learn & Understand
                        </h3>
                    </div>
                    
                    <div class="card" style="margin-bottom: 1rem;">
                        <div class="card-body">
                            <h4 style="color: var(--primary-color); margin-bottom: 0.5rem;">What is Asset Allocation?</h4>
                            <p style="font-size: 0.9rem; margin: 0; color: var(--text-secondary); line-height: 1.4;">
                                Asset allocation is the strategy of dividing investments among different asset categories like equity, debt, gold, and real estate to optimize risk and returns based on goals and risk tolerance.
                            </p>
                        </div>
                    </div>
                    
                    <div class="card" style="margin-bottom: 1rem;">
                        <div class="card-body">
                            <h4 style="color: var(--primary-color); margin-bottom: 0.5rem;">Emergency Fund — Why It Matters</h4>
                            <p style="font-size: 0.9rem; margin: 0; color: var(--text-secondary); line-height: 1.4;">
                                An emergency fund provides financial security during unexpected events like job loss or medical emergencies. It should cover 6-12 months of living expenses in easily accessible accounts.
                            </p>
                        </div>
                    </div>
                    
                    <div class="card" style="margin-bottom: 1rem;">
                        <div class="card-body">
                            <h4 style="color: var(--primary-color); margin-bottom: 0.5rem;">What is a Healthy Savings Rate?</h4>
                            <p style="font-size: 0.9rem; margin: 0; color: var(--text-secondary); line-height: 1.4;">
                                A healthy savings rate is typically 20-30% of income. This includes emergency funds, retirement savings, and goal-specific investments. Higher rates accelerate wealth building and financial freedom.
                            </p>
                        </div>
                    </div>
                    
                    <div class="card">
                        <div class="card-body">
                            <h4 style="color: var(--primary-color); margin-bottom: 0.5rem;">Understanding Risk vs Return</h4>
                            <p style="font-size: 0.9rem; margin: 0; color: var(--text-secondary); line-height: 1.4;">
                                Higher potential returns typically come with higher risk. Diversification across asset classes helps balance risk while pursuing growth over the long term.
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Navigation -->
        <div class="navigation">
            <button type="button" class="nav-btn btn-secondary" onclick="goBack()">
                <i class="fas fa-arrow-left"></i> Back: Dashboard
            </button>
            <button type="button" class="nav-btn btn-primary" onclick="completeJourney()">
                Complete Journey <i class="fas fa-check"></i>
            </button>
        </div>
    </div>

    <!-- Status Message -->
    <div id="status" class="status-message" style="display: none;"></div>

    <!-- Firebase Scripts -->
    <script src="https://www.gstatic.com/firebasejs/11.8.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/11.8.1/firebase-auth-compat.js"></script>
    <script src="auth.js"></script>
    <script src="common.js"></script>
    <script src="analytics.js"></script>
</body>
</html> 