<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Personal Information - LifeNivesh</title>
    <link rel="stylesheet" href="../css/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <!-- Simple Navigation (will be enhanced after onboarding) -->
    <nav class="navbar">
        <div class="container">
            <div class="nav-brand">
                <img src="../logo.svg" alt="LifeNivesh Logo" class="logo">
                <span>LifeNivesh</span>
            </div>
            <div class="nav-links" id="nav-links" style="display: none;">
                <a href="personal-info.html" class="nav-link active">Personal Info</a>
                <a href="networth.html" class="nav-link">Net Worth</a>
                <a href="income.html" class="nav-link">Income</a>
                <a href="expenses.html" class="nav-link">Expenses</a>
                <a href="ff-score.html" class="nav-link">FF Score</a>
                <a href="risk-profile.html" class="nav-link">Risk Profile</a>
                <a href="insurance.html" class="nav-link">Insurance</a>
                <a href="dashboard.html" class="nav-link">Dashboard</a>
                <a href="advisor.html" class="nav-link">Financial Advisor</a>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="container">
        <div class="onboarding-progress">
            <div class="progress-step active">
                <span class="step-number">1</span>
                <span class="step-label">Personal Info</span>
            </div>
            <div class="progress-step">
                <span class="step-number">2</span>
                <span class="step-label">Net Worth</span>
            </div>
            <div class="progress-step">
                <span class="step-number">3</span>
                <span class="step-label">Income</span>
            </div>
            <div class="progress-step">
                <span class="step-number">4</span>
                <span class="step-label">Expenses</span>
            </div>
        </div>

        <div class="card">
            <div class="card-header">
                <h1><i class="fas fa-user"></i> Personal Information</h1>
            </div>
            <div class="card-body">
                <form id="personal-info-form" class="form">
                    <div class="form-group">
                        <label for="name">Full Name</label>
                        <input type="text" id="name" name="name" required>
                    </div>

                    <div class="form-group">
                        <label for="age">Age</label>
                        <input type="number" id="age" name="age" min="18" max="100" required>
                    </div>

                    <div class="form-group">
                        <label for="occupation">Occupation</label>
                        <input type="text" id="occupation" name="occupation" required>
                    </div>

                    <div class="form-group">
                        <label for="email">Email</label>
                        <input type="email" id="email" name="email" required>
                    </div>

                    <div class="form-group">
                        <label for="phone">Phone Number</label>
                        <input type="tel" id="phone" name="phone" pattern="[0-9]{10}" required>
                    </div>

                    <div class="form-group">
                        <label for="city">City</label>
                        <input type="text" id="city" name="city" required>
                    </div>

                    <div class="form-group">
                        <label>Financial Goals (Select all that apply)</label>
                        <div class="checkbox-group">
                            <label class="checkbox-label">
                                <input type="checkbox" name="goals" value="retirement"> Retirement Planning
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" name="goals" value="investment"> Investment Growth
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" name="goals" value="debt"> Debt Management
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" name="goals" value="savings"> Emergency Savings
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" name="goals" value="tax"> Tax Planning
                            </label>
                        </div>
                    </div>

                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary">Continue to Net Worth</button>
                    </div>
                </form>
            </div>
        </div>
    </main>

    <!-- Simple Footer -->
    <footer>
        <div class="container">
            <div class="footer-bottom">
                <p>&copy; 2024 LifeNivesh. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script src="../js/utils.js"></script>
    <script src="../js/state.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const form = document.getElementById('personal-info-form');
            const navLinks = document.getElementById('nav-links');

            // Check if user has already completed onboarding
            const userState = AppState.personalInfo;
            if (userState && userState.name) {
                // Show navigation if user has already completed onboarding
                navLinks.style.display = 'flex';
                
                // Pre-fill form with existing data
                document.getElementById('name').value = userState.name || '';
                document.getElementById('age').value = userState.age || '';
                document.getElementById('occupation').value = userState.occupation || '';
                document.getElementById('email').value = userState.email || '';
                document.getElementById('phone').value = userState.phone || '';
                document.getElementById('city').value = userState.city || '';
                
                if (userState.goals) {
                    userState.goals.forEach(goal => {
                        const checkbox = document.querySelector(`input[value="${goal}"]`);
                        if (checkbox) checkbox.checked = true;
                    });
                }
            }

            form.addEventListener('submit', function(e) {
                e.preventDefault();
                
                // Collect form data
                const formData = {
                    name: document.getElementById('name').value,
                    age: parseInt(document.getElementById('age').value),
                    occupation: document.getElementById('occupation').value,
                    email: document.getElementById('email').value,
                    phone: document.getElementById('phone').value,
                    city: document.getElementById('city').value,
                    goals: Array.from(document.querySelectorAll('input[name="goals"]:checked'))
                        .map(cb => cb.value)
                };

                // Save to AppState
                AppState.personalInfo = formData;
                AppState.save();

                // Show navigation after form submission
                navLinks.style.display = 'flex';

                // Redirect to next step
                window.location.href = 'networth.html';
            });
        });
    </script>
</body>
</html> 